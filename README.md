# ğŸ¤– Chatbot System

å®¿æ³Šæ–½è¨­å‘ã‘ã® **äºˆç´„ãƒ»å•ã„åˆã‚ã›å¯¾å¿œãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ** ã§ã™ã€‚  
RAGï¼ˆRetrieval-Augmented Generationï¼‰ã¨OpenAI APIã‚’æ´»ç”¨ã—ã€è‡ªç„¶ã§æŸ”è»Ÿãªå¯¾è©±ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

---

## ğŸ“š ç›®æ¬¡

- [æ¦‚è¦](#-æ¦‚è¦)
- [ç‰¹å¾´](#-ç‰¹å¾´)
- [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](#-ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ)
- [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ](#-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ)
- [RADæ§‹æˆï¼ˆRAG + API + Dialogï¼‰](#-radæ§‹æˆrag--api--dialog)
- [ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ](#-ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †](#-ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
- [ãƒ†ã‚¹ãƒˆ](#-ãƒ†ã‚¹ãƒˆ)
- [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](#-ãƒ©ã‚¤ã‚»ãƒ³ã‚¹)
- [è²¢çŒ®æ–¹æ³•](#-è²¢çŒ®æ–¹æ³•)

---

## ğŸ§  æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€å®¿æ³Šæ–½è¨­ã®äºˆç´„ãƒ»å•ã„åˆã‚ã›ãƒ»è¦³å…‰æ¡ˆå†…ãƒ»ã‚°ãƒ«ãƒ¡æƒ…å ±ãªã©ã‚’è‡ªå‹•ã§å¯¾å¿œã™ã‚‹ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã§ã™ã€‚  
RAGæ§‹æˆã«ã‚ˆã‚Šã€FAQã‚„è¦³å…‰æƒ…å ±ãªã©ã®çŸ¥è­˜ã‚’æ¤œç´¢ã—ã€OpenAI APIã‚’é€šã˜ã¦è‡ªç„¶ãªå¿œç­”ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

---

## âœ¨ ç‰¹å¾´

- ğŸ” **RAGæ§‹æˆ** ã«ã‚ˆã‚‹é«˜ç²¾åº¦ãªæƒ…å ±æ¤œç´¢  
- ğŸ’¬ **è‡ªç„¶è¨€èªå¯¾è©±** ã«ã‚ˆã‚‹ã‚¹ãƒ ãƒ¼ã‚ºãªãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“  
- ğŸ§© **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ** ã«ã‚ˆã‚Šæ‹¡å¼µæ€§ãŒé«˜ã„  
- ğŸ¯ **å®¿æ³Šäºˆç´„ãƒ»è¦³å…‰æ¡ˆå†…ãƒ»FAQå¯¾å¿œ** ãªã©å¤šç›®çš„å¯¾å¿œ  
- ğŸ§  **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ** ã«ã‚ˆã‚‹æŸ”è»Ÿãªä¼šè©±åˆ¶å¾¡  

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
   â†“
æ„å›³åˆ¤å®š (judge_intent.py)
   â†“
RAGæ¤œç´¢ (utils/rag.py)
   â†“
å¿œç­”ç”Ÿæˆ (generate.py)
   â†“
å‡ºåŠ› (main.py)
```

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
chatbot/
â”œâ”€â”€ main.py                        # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ chatgpt_api.py                 # OpenAI APIé€£æº
â”œâ”€â”€ generate.py                    # å¿œç­”ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ menu_items.py                  # ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®å®šç¾©
â”œâ”€â”€ messages.py                    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†
â”œâ”€â”€ reservation_handler*.py        # äºˆç´„é–¢é€£å‡¦ç†ç¾¤
â”œâ”€â”€ reservation_status.py          # äºˆç´„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†
â”œâ”€â”€ validation.py                  # å…¥åŠ›æ¤œè¨¼
â”œâ”€â”€ prompts/                       # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ»RAGãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ judge_*                    # æ„å›³åˆ¤å®š
â”‚   â”œâ”€â”€ data_*                     # FAQãƒ»è¦³å…‰ãƒ»ã‚°ãƒ«ãƒ¡æƒ…å ±
â”‚   â”œâ”€â”€ confirm_*                  # ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
â”‚   â”œâ”€â”€ execute_reserve.py         # äºˆç´„å®Ÿè¡Œ
â”‚   â”œâ”€â”€ text_chunks_*.json         # RAGç”¨ãƒ†ã‚­ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ vectors_*.json             # ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ ...
â”œâ”€â”€ utils/                         # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ç¾¤
â”‚   â”œâ”€â”€ rag.py                     # RAGå‡¦ç†
â”‚   â”œâ”€â”€ transcriber.py             # éŸ³å£°â†’ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›
â”‚   â”œâ”€â”€ clean_phone_number.py      # é›»è©±ç•ªå·æ•´å½¢
â”‚   â”œâ”€â”€ vocabulary_filter_utils.py # ç¦æ­¢èªãƒ•ã‚£ãƒ«ã‚¿
â”‚   â””â”€â”€ ...
â””â”€â”€ requirements.txt               # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
```

---

## ğŸ§© RADæ§‹æˆï¼ˆRAG + API + Dialogï¼‰

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | å½¹å‰² | å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ« |
|----------------|------|---------------|
| **RAG** | çŸ¥è­˜æ¤œç´¢ | `utils/rag.py` |
| **API** | OpenAI APIé€£æº | `chatgpt_api.py` |
| **Dialog** | å¯¾è©±åˆ¶å¾¡ | `main.py`, `messages.py` |

ã“ã®3å±¤æ§‹æˆã«ã‚ˆã‚Šã€æ–‡è„ˆã‚’ä¿æŒã—ã¤ã¤å¤–éƒ¨çŸ¥è­˜ã‚’æ´»ç”¨ã—ãŸè‡ªç„¶ãªå¿œç­”ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

---

## ğŸ’¬ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ

`prompts/` ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ã€å„ç¨®å¯¾è©±ã‚·ãƒŠãƒªã‚ªã«å¯¾å¿œã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

| ã‚«ãƒ†ã‚´ãƒª | ä¾‹ | èª¬æ˜ |
|-----------|----|------|
| `judge_*` | `judge_intent.py` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ„å›³ã®åˆ†é¡ |
| `data_*` | `data_faq.py` | FAQãƒ»è¦³å…‰ãƒ»ã‚°ãƒ«ãƒ¡æƒ…å ± |
| `confirm_*` | `confirm_reserve.py` | äºˆç´„ç¢ºèªãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç¢ºèª |
| `execute_reserve.py` | - | å®Ÿéš›ã®äºˆç´„å®Ÿè¡Œ |
| `inn_faq.py` | - | å®¿æ³Šæ–½è¨­ã«é–¢ã™ã‚‹FAQ |

---

## âš™ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

```bash
# ä»®æƒ³ç’°å¢ƒã®ä½œæˆ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

```bash
# ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã®èµ·å‹•
python main.py
```

èµ·å‹•å¾Œã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¾ãŸã¯LINEé€£æºãªã©ã‚’é€šã˜ã¦å¯¾è©±ãŒå¯èƒ½ã§ã™ã€‚

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å˜ä½“ã§å®Ÿè¡Œå¯èƒ½ã§ã™ã€‚

```bash
python reservation_handler_guest.py
```

---

## ğŸ¤ è²¢çŒ®æ–¹æ³•

1. ãƒ•ã‚©ãƒ¼ã‚¯ã‚’ä½œæˆ  
2. æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`feature/your-feature`)  
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ  
4. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡  

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç¤¾å†…åˆ©ç”¨ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å¤–éƒ¨å…¬é–‹ã¯æƒ³å®šã—ã¦ã„ã¾ã›ã‚“ã€‚

---

## ğŸ‘¤ ä½œè€…æƒ…å ±

| é …ç›® | å†…å®¹ |
|------|------|
| **åå‰** | å²¡ç”° ä¿Šå® (Toshihiro Okada) |
| **GitHub** | [okatano-toshiso](https://github.com/okatano-toshiso) |
| **æ‰€å±** | SynapseAI |
| **Webã‚µã‚¤ãƒˆ** | [https://github.com/okatano-toshiso/synapseai](https://github.com/okatano-toshiso/synapseai) |
| **å°‚é–€åˆ†é‡** | AIã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºãƒ»è‡ªç„¶è¨€èªå‡¦ç†ãƒ»è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ |

---

### ğŸ§© ä½œè€…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

> ã€ŒAIãŒäººã®ä»•äº‹ã‚’å¥ªã†ã®ã§ã¯ãªãã€äººã®å‰µé€ æ€§ã‚’æ‹¡å¼µã™ã‚‹æœªæ¥ã‚’ä½œã‚ŠãŸã„ã€‚ã€

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€SynapseAIã®AIã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®ä¸€ç’°ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¾ã—ãŸã€‚  
å®¿æ³Šæ¥­ç•Œã«ãŠã‘ã‚‹è‡ªå‹•å¿œç­”ãƒ»äºˆç´„æ”¯æ´ãƒ»æƒ…å ±æ¤œç´¢ã®æœ€é©åŒ–ã‚’ç›®çš„ã¨ã—ã€  
**RAG Ã— OpenAI Ã— å¯¾è©±è¨­è¨ˆ** ã«ã‚ˆã‚‹å®Ÿç”¨çš„ãªAIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®å®Ÿç¾ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ§­ å‚è€ƒè³‡æ–™

> æœ¬READMEã¯ä»¥ä¸‹ã®è³‡æ–™ã‚’å‚è€ƒã«ã€èª­ã¿ã‚„ã™ã•ãƒ»æ§‹é€ æ€§ãƒ»é–‹ç™ºè€…ä½“é¨“ã‚’é‡è¦–ã—ã¦ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚

- [GitHubå…¬å¼: READMEã®æ›¸ãæ–¹](https://docs.github.com/ja/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax)
- [Qiita: READMEã®æ›¸ãæ–¹ã¾ã¨ã‚](https://qiita.com/shun198/items/c983c713452c041ef787)
- [C++ Learning: READMEã®åŸºæœ¬æ§‹æˆ](https://cpp-learning.com/readme/)
- [Reddit: Good README Templates](https://www.reddit.com/r/programming/comments/l0mgcy/github_readme_templates_creating_a_good_readme_is/?tl=ja)

---
